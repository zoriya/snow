image:
  tag: v1.137.3
immich:
  persistence:
    library:
      existingClaim: pictures
redis:
  enabled: true

server:
  ingress:
    main:
      enabled: true
      className: cilium
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt
        acme.cert-manager.io/http01-edit-in-place: "true"
        # proxy-body-size is set to 0 to remove the body limit on file uploads
        nginx.ingress.kubernetes.io/proxy-body-size: "0"
      hosts:
        - host: immich.sdg.moe
          paths:
            - path: /
      tls:
        - secretName: immich-tls
          hosts:
            - immich.sdg.moe

machine-learning:
  persistence:
    cache:
      type: pvc

env:
  DB_URL: postgres://immich@postgres-cluster-rw.postgres/immich?sslcert=/pg/tls.crt&sslkey=/pg/tls.key&sslrootcert=/pg/ca.crt
  IMMICH_CONFIG_FILE: /config/config.yaml
persistence:
  pg:
    enabled: true
    type: secret
    name: postgres-immich
    defaultMode: 0640

  config:
    enabled: true
    type: secret
    name: immich-oidc
